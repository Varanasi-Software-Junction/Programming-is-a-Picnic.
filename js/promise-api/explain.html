<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Promises and Fetch Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f9;
        }
        h1, h2 {
            color: #333;
        }
        pre {
            background-color: #eee;
            padding: 10px;
            border-radius: 5px;
        }
        code {
            color: #d63384;
        }
        .section {
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <h1>Understanding Promises in JavaScript</h1>

    <div class="section">
        <h2>What is a Promise?</h2>
        <p>
            A <strong>Promise</strong> in JavaScript represents the eventual completion (or failure) of an asynchronous operation and its resulting value. 
            Promises provide a more elegant and readable way to work with asynchronous code compared to traditional callback functions.
        </p>

        <p>A promise can be in one of the following states:</p>
        <ul>
            <li><strong>Pending</strong>: The initial state of the Promise. The operation is neither completed nor failed yet.</li>
            <li><strong>Fulfilled</strong>: The asynchronous operation was completed successfully.</li>
            <li><strong>Rejected</strong>: The asynchronous operation failed.</li>
        </ul>
    </div>

    <div class="section">
        <h2>Creating and Handling a Promise</h2>
        <pre>
<code>
let promise = new Promise(function(resolve, reject) {
    let success = true; // Simulate success or failure
    if (success) {
        resolve("Operation succeeded!");
    } else {
        reject("Operation failed.");
    }
});

promise
    .then(function(result) {
        console.log(result);  // Output: Operation succeeded!
    })
    .catch(function(error) {
        console.log(error);  // Output: Operation failed (if rejected)
    });
</code>
        </pre>
    </div>

    <div class="section">
        <h2>Chaining Promises</h2>
        <p>Promises allow chaining, making it easier to perform multiple asynchronous operations in sequence.</p>
        <pre>
<code>
let promise = new Promise(function(resolve, reject) {
    setTimeout(() => resolve(10), 1000); // Resolves after 1 second
});

promise
    .then(function(result) {
        console.log(result);  // Output: 10
        return result * 2;
    })
    .then(function(result) {
        console.log(result);  // Output: 20
        return result * 3;
    })
    .then(function(result) {
        console.log(result);  // Output: 60
    });
</code>
        </pre>
    </div>

    <div class="section">
        <h2>Promise Methods</h2>
        <p>Here are some common methods provided by Promises:</p>
        <ul>
            <li><strong>Promise.all()</strong>: Waits for all promises to fulfill.</li>
            <li><strong>Promise.race()</strong>: Returns as soon as one of the promises resolves or rejects.</li>
            <li><strong>Promise.allSettled()</strong>: Resolves after all promises settle (fulfilled or rejected).</li>
            <li><strong>Promise.any()</strong>: Resolves as soon as any one promise resolves, rejects if all fail.</li>
        </ul>
    </div>

    <div class="section">
        <h1>SWAPI Fetch Example Using Promises</h1>

        <h2>Version 1: Using Arrow Functions</h2>
        <pre>
<code>
fetch('https://swapi.dev/api/people/1/')
    .then(response => response.json())  // Parse JSON
    .then(data => {
        console.log('Name:', data.name);  // Output: Luke Skywalker
        console.log('Height:', data.height);  // Output: Height
        console.log('Mass:', data.mass);  // Output: Mass
    })
    .catch(error => console.log('Error:', error));
</code>
        </pre>

        <h2>Version 2: Without Arrow Functions (Using Traditional Functions)</h2>
        <pre>
<code>
fetch('https://swapi.dev/api/people/1/')
    .then(function(response) {
        return response.json();   // Parse JSON
    })
    .then(function(data) {
        console.log('Name:', data.name);  // Output: Luke Skywalker
        console.log('Height:', data.height);  // Output: Height
        console.log('Mass:', data.mass);  // Output: Mass
    })
    .catch(function(error) {
        console.log('Error:', error);  // Handle error
    });
</code>
        </pre>

        <h2>Version 3: Without Anonymous Functions (Using Named Functions)</h2>
        <pre>
<code>
// Define functions
function handleResponse(response) {
    return response.json();  // Parse JSON response
}

function handleData(data) {
    console.log('Name:', data.name);   // Output: Luke Skywalker
    console.log('Height:', data.height);
    console.log('Mass:', data.mass);
}

function handleError(error) {
    console.log('Error:', error);  // Handle error
}

// Fetch using named functions
fetch('https://swapi.dev/api/people/1/')
    .then(handleResponse)
    .then(handleData)
    .catch(handleError);
</code>
        </pre>
    </div>
</body>
</html>
